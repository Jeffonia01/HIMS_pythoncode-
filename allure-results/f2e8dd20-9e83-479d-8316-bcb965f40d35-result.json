{"name": "test_renegotiation_randomized[tls13]", "status": "broken", "statusDetails": {"message": "_pytest.fixtures.FixtureLookupError: ('mock_clock', <FixtureRequest for <Function test_renegotiation_randomized[tls13]>>)", "trace": "file C:\\Users\\ADMIN\\OneDrive\\Desktop\\PHP_HIMS\\Lib\\site-packages\\trio\\_tests\\test_ssl.py, line 632\n  @slow\n  async def test_renegotiation_randomized(\n      mock_clock: MockClock,\n      client_ctx: SSLContext,\n  ) -> None:\n      # The only blocking things in this function are our random sleeps, so 0 is\n      # a good threshold.\n      mock_clock.autojump_threshold = 0\n\n      import random\n\n      r = random.Random(0)\n\n      async def sleeper(_: object) -> None:\n          await trio.sleep(r.uniform(0, 10))\n\n      async def clear() -> None:\n          while s.transport_stream.renegotiate_pending():\n              with assert_checkpoints():\n                  await send(b\"-\")\n              with assert_checkpoints():\n                  await expect(b\"-\")\n          print(\"-- clear --\")\n\n      async def send(byte: bytes) -> None:\n          await s.transport_stream.sleeper(\"outer send\")\n          print(\"calling SSLStream.send_all\", byte)\n          with assert_checkpoints():\n              await s.send_all(byte)\n\n      async def expect(expected: bytes) -> None:\n          await s.transport_stream.sleeper(\"expect\")\n          print(\"calling SSLStream.receive_some, expecting\", expected)\n          assert len(expected) == 1\n          with assert_checkpoints():\n              assert await s.receive_some(1) == expected\n\n      with virtual_ssl_echo_server(client_ctx, sleeper=sleeper) as s:\n          await s.do_handshake()\n\n          await send(b\"a\")\n          s.transport_stream.renegotiate()\n          await expect(b\"a\")\n\n          await clear()\n\n          for i in range(100):\n              b1 = bytes([i % 0xFF])\n              b2 = bytes([(2 * i) % 0xFF])\n              s.transport_stream.renegotiate()\n              async with _core.open_nursery() as nursery:\n                  nursery.start_soon(send, b1)\n                  nursery.start_soon(expect, b1)\n              async with _core.open_nursery() as nursery:\n                  nursery.start_soon(expect, b2)\n                  nursery.start_soon(send, b2)\n              await clear()\n\n          for i in range(100):\n              b1 = bytes([i % 0xFF])\n              b2 = bytes([(2 * i) % 0xFF])\n              await send(b1)\n              s.transport_stream.renegotiate()\n              await expect(b1)\n              async with _core.open_nursery() as nursery:\n                  nursery.start_soon(expect, b2)\n                  nursery.start_soon(send, b2)\n              await clear()\n\n      # Checking that wait_send_all_might_not_block and receive_some don't\n      # conflict:\n\n      # 1) Set up a situation where expect (receive_some) is blocked sending,\n      # and wait_send_all_might_not_block comes in.\n\n      # Our receive_some() call will get stuck when it hits send_all\n      async def sleeper_with_slow_send_all(method: str) -> None:\n          if method == \"send_all\":\n              await trio.sleep(100000)\n\n      # And our wait_send_all_might_not_block call will give it time to get\n      # stuck, and then start\n      async def sleep_then_wait_writable() -> None:\n          await trio.sleep(1000)\n          await s.wait_send_all_might_not_block()\n\n      with virtual_ssl_echo_server(client_ctx, sleeper=sleeper_with_slow_send_all) as s:\n          await send(b\"x\")\n          s.transport_stream.renegotiate()\n          async with _core.open_nursery() as nursery:\n              nursery.start_soon(expect, b\"x\")\n              nursery.start_soon(sleep_then_wait_writable)\n\n          await clear()\n\n          await s.aclose()\n\n      # 2) Same, but now wait_send_all_might_not_block is stuck when\n      # receive_some tries to send.\n\n      async def sleeper_with_slow_wait_writable_and_expect(method: str) -> None:\n          if method == \"wait_send_all_might_not_block\":\n              await trio.sleep(100000)\n          elif method == \"expect\":\n              await trio.sleep(1000)\n\n      with virtual_ssl_echo_server(\n          client_ctx,\n          sleeper=sleeper_with_slow_wait_writable_and_expect,\n      ) as s:\n          await send(b\"x\")\n          s.transport_stream.renegotiate()\n          async with _core.open_nursery() as nursery:\n              nursery.start_soon(expect, b\"x\")\n              nursery.start_soon(s.wait_send_all_might_not_block)\n\n          await clear()\n\n          await s.aclose()\nE       fixture 'mock_clock' not found\n>       available fixtures: cache, capfd, capfdbinary, caplog, capsys, capsysbinary, client_ctx, doctest_namespace, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory\n>       use 'pytest --fixtures [testpath]' for help on them.\n\nC:\\Users\\ADMIN\\OneDrive\\Desktop\\PHP_HIMS\\Lib\\site-packages\\trio\\_tests\\test_ssl.py:632"}, "parameters": [{"name": "client_ctx", "value": "'tls13'"}], "start": 1740043663200, "stop": 1740043663200, "uuid": "8d5a4185-7c71-471f-8921-db567bb6ac8e", "historyId": "1049a1907c8cc66bbbe03ffcbd44ac3e", "testCaseId": "2df1a824835410c3a4632553e554af8f", "fullName": "Lib.site-packages.trio._tests.test_ssl#test_renegotiation_randomized", "labels": [{"name": "tag", "value": "@pytest.mark.skipif(False, reason='use --run-slow to run slow tests')"}, {"name": "parentSuite", "value": "Lib.site-packages.trio._tests"}, {"name": "suite", "value": "test_ssl"}, {"name": "host", "value": "DESKTOP-5N0UDE1"}, {"name": "thread", "value": "16268-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "Lib.site-packages.trio._tests.test_ssl"}]}
{"name": "test_static_tool_sees_all_symbols[mypy-trio.lowlevel]", "status": "broken", "statusDetails": {"message": "ModuleNotFoundError: No module named 'mypy'", "trace": "tool = 'mypy', modname = 'trio.lowlevel', tmp_path = WindowsPath('C:/Users/ADMIN/AppData/Local/Temp/pytest-of-ADMIN/pytest-3/test_static_tool_sees_all_symb17')\n\n    @pytest.mark.redistributors_should_skip()\n    # Static analysis tools often have trouble with alpha releases, where Python's\n    # internals are in flux, grammar may not have settled down, etc.\n    @pytest.mark.skipif(\n        sys.version_info.releaselevel == \"alpha\",\n        reason=\"skip static introspection tools on Python dev/alpha releases\",\n    )\n    @pytest.mark.parametrize(\"modname\", PUBLIC_MODULE_NAMES)\n    @pytest.mark.parametrize(\"tool\", [\"pylint\", \"jedi\", \"mypy\", \"pyright_verifytypes\"])\n    @pytest.mark.filterwarnings(\n        # https://github.com/pypa/setuptools/issues/3274\n        \"ignore:module 'sre_constants' is deprecated:DeprecationWarning\",\n    )\n    def test_static_tool_sees_all_symbols(tool: str, modname: str, tmp_path: Path) -> None:\n        module = importlib.import_module(modname)\n    \n        def no_underscores(symbols: Iterable[str]) -> set[str]:\n            return {symbol for symbol in symbols if not symbol.startswith(\"_\")}\n    \n        runtime_names = no_underscores(dir(module))\n    \n        # ignore deprecated module `tests` being invisible\n        if modname == \"trio\":\n            runtime_names.discard(\"tests\")\n    \n        # Ignore any __future__ feature objects, if imported under that name.\n        for name in __future__.all_feature_names:\n            if getattr(module, name, None) is getattr(__future__, name):\n                runtime_names.remove(name)\n    \n        if tool == \"pylint\":\n            try:\n                from pylint.lint import PyLinter\n            except ImportError as error:\n                skip_if_optional_else_raise(error)\n    \n            linter = PyLinter()\n            assert module.__file__ is not None\n            ast = linter.get_ast(module.__file__, modname)\n            static_names = no_underscores(ast)  # type: ignore[arg-type]\n        elif tool == \"jedi\":\n            if sys.implementation.name != \"cpython\":\n                pytest.skip(\"jedi does not support pypy\")\n    \n            try:\n                import jedi\n            except ImportError as error:\n                skip_if_optional_else_raise(error)\n    \n            # Simulate typing \"import trio; trio.<TAB>\"\n            script = jedi.Script(f\"import {modname}; {modname}.\")\n            completions = script.complete()\n            static_names = no_underscores(c.name for c in completions)\n        elif tool == \"mypy\":\n            if not RUN_SLOW:  # pragma: no cover\n                pytest.skip(\"use --run-slow to check against mypy\")\n    \n            cache = Path.cwd() / \".mypy_cache\"\n    \n>           _ensure_mypy_cache_updated()\n\nLib\\site-packages\\trio\\_tests\\test_exports.py:179: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nLib\\site-packages\\trio\\_tests\\test_exports.py:45: in _ensure_mypy_cache_updated\n    skip_if_optional_else_raise(error)\nLib\\site-packages\\trio\\_tests\\pytest_plugin.py:54: in skip_if_optional_else_raise\n    raise error\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n    def _ensure_mypy_cache_updated() -> None:\n        # This pollutes the `empty` dir. Should this be changed?\n        try:\n>           from mypy.api import run\nE           ModuleNotFoundError: No module named 'mypy'\n\nLib\\site-packages\\trio\\_tests\\test_exports.py:43: ModuleNotFoundError"}, "parameters": [{"name": "tool", "value": "'mypy'"}, {"name": "modname", "value": "'trio.lowlevel'"}], "start": 1740044466298, "stop": 1740044466299, "uuid": "41b52754-4c4f-4074-9176-1e4bfad052f2", "historyId": "1dfa2182482f4c541a39d455640980ef", "testCaseId": "c050219bcfba939d1112f4e833c5e284", "fullName": "Lib.site-packages.trio._tests.test_exports#test_static_tool_sees_all_symbols", "labels": [{"name": "tag", "value": "@pytest.mark.filterwarnings('ignore:module 'sre_constants' is deprecated:DeprecationWarning')"}, {"name": "tag", "value": "@pytest.mark.skipif(False, reason='skip static introspection tools on Python dev/alpha releases')"}, {"name": "tag", "value": "redistributors_should_skip"}, {"name": "parentSuite", "value": "Lib.site-packages.trio._tests"}, {"name": "suite", "value": "test_exports"}, {"name": "host", "value": "DESKTOP-5N0UDE1"}, {"name": "thread", "value": "15496-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "Lib.site-packages.trio._tests.test_exports"}]}